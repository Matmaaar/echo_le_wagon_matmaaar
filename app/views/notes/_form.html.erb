<div class="content-card mt-3">
  <%= simple_form_for [content, note], html: { class: "note-form" } do |f| %>
    <div class="content-card-infos">

      <!-- Chronomètre (icône remplacée par input au clic) -->

      <div class="timestamp-input-wrapper timestamp-input" style="display: flex; align-items: center;">
        <span style="color: #0d6efd;">@</span>
        <%= f.text_field :video_timestamp,
          placeholder: "00:00",
          class: "timestamp-input",
          autocomplete: "off",
          style: "flex: 1",
          inputmode: "numeric",
          pattern: "[0-9]*",
          maxlength: 5,
          data: { behavior: "auto-insert-colon" } %>
      </div>

      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const input = document.querySelector('input[data-behavior="auto-insert-colon"]');
          if (input) {
            input.addEventListener("input", function(e) {
              let val = input.value.replace(/[^0-9]/g, "");
              if (val.length > 2) val = val.slice(0, 4);
              if (val.length > 2) {
                val = val.slice(0,2) + ":" + val.slice(2);
              }
              input.value = val;
            });
          }
        });
      </script>

      <!-- Champ principal -->
      <%= f.text_area :description,
      placeholder: "Add a new note",
      class: "description-field",
      autocomplete: "off",
      rows: 4 %>

      <!-- Bouton add -->
      <div style="display: flex; justify-content: flex-end;">
        <%= button_tag "ADD NOTE", type: :submit, class: "green-round-button" %>
      </div>

    </div>
  <% end %>
</div>
