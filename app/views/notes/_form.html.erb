<div class="content-card mt-3">
  <%= simple_form_for [content, note], html: { class: "note-form" } do |f| %>
    <div class="content-card-infos">

      <!-- Chronomètre (icône remplacée par input au clic) -->

      <div class="timestamp-input-wrapper timestamp-input" style="display: flex; align-items: center;">
        <span style="color: #0d6efd;">@</span>
        <%= f.time_field :video_timestamp,
          class: "timestamp-input",
          step: 1,
          placeholder: "00:00:00",
          style: "flex: 1",
          autocomplete: "off"
        %>
      </div>

      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const input = document.querySelector('input[data-behavior="auto-insert-colon"]');
          if (input) {
        input.addEventListener("input", function(e) {
          let val = input.value.replace(/[^0-9]/g, "");
          if (val.length > 6) val = val.slice(0, 6);
          if (val.length > 4) {
            val = val.slice(0,2) + ":" + val.slice(2,4) + ":" + val.slice(4);
          } else if (val.length > 2) {
            val = val.slice(0,2) + ":" + val.slice(2);
          }
          input.value = val;
        });
          }
        });
      </script>

      <!-- Champ principal -->
      <%= f.text_area :description,
      placeholder: "Add a new note",
      class: "description-field",
      autocomplete: "off",
      rows: 4 %>

      <!-- Bouton add -->
      <div style="display: flex; justify-content: flex-end;">
        <%= button_tag "ADD NOTE", type: :submit, class: "green-round-button" %>
      </div>

    </div>
  <% end %>
</div>
